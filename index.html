<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ã¸ããã‚Šè¨ºæ–­ãƒ„ãƒ¼ãƒ«ï½œå®¶è¨ˆã¾ã‚‹ã”ã¨ç¯€ç´„ãƒã‚§ãƒƒã‚¯</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ·</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700;900&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --cream: #FFF8F0;
    --warm-pink: #F8C8B0;
    --coral: #E8835A;
    --deep-coral: #C45E38;
    --mint: #B8E8D8;
    --deep-mint: #4AA88A;
    --gold: #D4A043;
    --deep-gold: #9A6E1E;
    --text-dark: #2A1F1A;
    --text-mid: #5A4035;
    --text-light: #9A8070;
    --shadow: rgba(196, 94, 56, 0.15);
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Noto Sans JP', sans-serif;
    background: var(--cream);
    color: var(--text-dark);
    min-height: 100vh;
    position: relative;
    overflow-x: hidden;
  }

  body::before {
    content: '';
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: 
      radial-gradient(circle at 10% 20%, rgba(248,200,176,0.4) 0%, transparent 50%),
      radial-gradient(circle at 90% 80%, rgba(184,232,216,0.35) 0%, transparent 50%),
      radial-gradient(circle at 50% 50%, rgba(212,160,67,0.08) 0%, transparent 70%);
    pointer-events: none;
    z-index: 0;
  }

  .container {
    max-width: 680px;
    margin: 0 auto;
    padding: 20px 16px 80px;
    position: relative;
    z-index: 1;
  }

  /* HEADER */
  .header {
    text-align: center;
    padding: 40px 0 32px;
    animation: fadeDown 0.8s ease both;
  }

  .header-badge {
    display: inline-block;
    background: var(--coral);
    color: white;
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 0.15em;
    padding: 5px 16px;
    border-radius: 20px;
    margin-bottom: 16px;
    box-shadow: 0 3px 12px rgba(232,131,90,0.4);
  }

  .header h1 {
    font-family: 'Noto Serif JP', serif;
    font-size: clamp(26px, 6vw, 38px);
    font-weight: 900;
    color: var(--text-dark);
    line-height: 1.3;
    margin-bottom: 12px;
  }

  .header h1 span {
    color: var(--coral);
    position: relative;
  }

  .header h1 span::after {
    content: '';
    position: absolute;
    bottom: 2px; left: 0; right: 0;
    height: 6px;
    background: var(--warm-pink);
    z-index: -1;
    border-radius: 3px;
  }

  .header-sub {
    font-size: 14px;
    color: var(--text-mid);
    line-height: 1.7;
  }

  /* PIGGY COIN COUNTER */
  .sticky-total {
    position: sticky;
    top: 12px;
    z-index: 100;
    margin-bottom: 28px;
    animation: fadeDown 0.8s ease 0.2s both;
  }

  .total-card {
    background: white;
    border-radius: 20px;
    padding: 20px 24px;
    box-shadow: 0 8px 32px var(--shadow), 0 2px 8px rgba(0,0,0,0.06);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    border: 2px solid rgba(232,131,90,0.2);
  }

  .total-left {
    display: flex;
    align-items: center;
    gap: 14px;
  }

  .piggy-icon {
    font-size: 44px;
    filter: drop-shadow(0 4px 8px rgba(232,131,90,0.3));
    transition: transform 0.3s ease;
  }

  .piggy-icon.bounce {
    animation: piggyBounce 0.5s ease;
  }

  .total-label {
    font-size: 12px;
    color: var(--text-light);
    font-weight: 500;
    letter-spacing: 0.05em;
    margin-bottom: 2px;
  }

  .total-amount {
    font-family: 'Noto Serif JP', serif;
    font-size: clamp(28px, 7vw, 40px);
    font-weight: 900;
    color: var(--coral);
    line-height: 1;
    transition: all 0.3s ease;
  }

  .total-amount .yen {
    font-size: 0.55em;
    vertical-align: top;
    margin-top: 4px;
    display: inline-block;
  }

  .total-period {
    text-align: right;
    font-size: 11px;
    color: var(--text-light);
  }

  .period-toggle {
    display: flex;
    gap: 4px;
    margin-top: 6px;
    justify-content: flex-end;
  }

  .period-btn {
    padding: 4px 10px;
    border-radius: 10px;
    border: 1.5px solid var(--warm-pink);
    background: white;
    font-size: 11px;
    font-family: 'Noto Sans JP', sans-serif;
    color: var(--text-mid);
    cursor: pointer;
    transition: all 0.2s;
  }

  .period-btn.active {
    background: var(--coral);
    border-color: var(--coral);
    color: white;
    font-weight: 700;
  }

  /* CATEGORY SECTIONS */
  .category {
    margin-bottom: 24px;
    animation: fadeUp 0.6s ease both;
  }

  .category:nth-child(1) { animation-delay: 0.3s; }
  .category:nth-child(2) { animation-delay: 0.4s; }
  .category:nth-child(3) { animation-delay: 0.5s; }
  .category:nth-child(4) { animation-delay: 0.6s; }
  .category:nth-child(5) { animation-delay: 0.7s; }
  .category:nth-child(6) { animation-delay: 0.8s; }

  .category-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 12px;
    padding: 0 4px;
  }

  .category-icon {
    width: 36px;
    height: 36px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    flex-shrink: 0;
  }

  .category-title {
    font-family: 'Noto Serif JP', serif;
    font-size: 16px;
    font-weight: 700;
    color: var(--text-dark);
  }

  .category-subtotal {
    margin-left: auto;
    font-size: 13px;
    font-weight: 700;
    color: var(--deep-coral);
    background: rgba(232,131,90,0.12);
    padding: 3px 10px;
    border-radius: 10px;
  }

  .items-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  /* CHECK ITEM */
  .check-item {
    background: white;
    border-radius: 16px;
    padding: 14px 18px;
    display: flex;
    align-items: center;
    gap: 14px;
    cursor: pointer;
    transition: all 0.25s ease;
    border: 2px solid transparent;
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    user-select: none;
  }

  .check-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.08);
    border-color: var(--warm-pink);
  }

  .check-item.checked {
    background: linear-gradient(135deg, #FFF5F0, #FFFAF5);
    border-color: var(--coral);
    box-shadow: 0 4px 16px rgba(232,131,90,0.2);
  }

  .check-box {
    width: 26px;
    height: 26px;
    border-radius: 8px;
    border: 2px solid #DDD;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all 0.25s ease;
    background: white;
  }

  .check-item.checked .check-box {
    background: var(--coral);
    border-color: var(--coral);
  }

  .check-mark {
    display: none;
    color: white;
    font-size: 15px;
    font-weight: 900;
  }

  .check-item.checked .check-mark {
    display: block;
    animation: checkPop 0.3s cubic-bezier(0.34,1.56,0.64,1) both;
  }

  .item-emoji {
    font-size: 24px;
    flex-shrink: 0;
    transition: transform 0.3s ease;
  }

  .check-item.checked .item-emoji {
    transform: scale(1.15);
  }

  .item-info {
    flex: 1;
    min-width: 0;
  }

  .item-name {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-dark);
    line-height: 1.4;
    margin-bottom: 2px;
  }

  .item-tip {
    font-size: 11px;
    color: var(--text-light);
    line-height: 1.4;
  }

  .item-saving {
    flex-shrink: 0;
    text-align: right;
  }

  .saving-amount {
    font-family: 'Noto Serif JP', serif;
    font-size: 16px;
    font-weight: 700;
    color: var(--text-mid);
    transition: color 0.25s;
    white-space: nowrap;
  }

  .check-item.checked .saving-amount {
    color: var(--coral);
  }

  .saving-unit {
    font-size: 10px;
    color: var(--text-light);
    display: block;
    text-align: right;
  }

  /* RESULT SECTION */
  .result-section {
    margin-top: 32px;
    animation: fadeUp 0.6s ease 0.9s both;
  }

  .result-card {
    background: linear-gradient(135deg, var(--coral), var(--deep-coral));
    border-radius: 24px;
    padding: 32px 28px;
    color: white;
    text-align: center;
    position: relative;
    overflow: hidden;
    box-shadow: 0 16px 48px rgba(196,94,56,0.4);
  }

  .result-card::before {
    content: 'ğŸ·';
    position: absolute;
    top: -10px;
    right: 20px;
    font-size: 80px;
    opacity: 0.15;
    transform: rotate(15deg);
  }

  .result-title {
    font-family: 'Noto Serif JP', serif;
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 8px;
    opacity: 0.9;
  }

  .result-year {
    font-family: 'Noto Serif JP', serif;
    font-size: clamp(36px, 9vw, 56px);
    font-weight: 900;
    margin-bottom: 6px;
    text-shadow: 0 4px 16px rgba(0,0,0,0.2);
  }

  .result-year .yen2 {
    font-size: 0.5em;
    vertical-align: top;
    margin-top: 6px;
    display: inline-block;
  }

  .result-year-label {
    font-size: 13px;
    opacity: 0.85;
    margin-bottom: 20px;
  }

  .result-message {
    background: rgba(255,255,255,0.2);
    border-radius: 14px;
    padding: 14px 18px;
    font-size: 14px;
    line-height: 1.6;
    margin-bottom: 20px;
    backdrop-filter: blur(10px);
  }

  .cta-btn {
    display: inline-block;
    background: white;
    color: var(--coral);
    font-family: 'Noto Sans JP', sans-serif;
    font-weight: 700;
    font-size: 15px;
    padding: 14px 32px;
    border-radius: 50px;
    border: none;
    cursor: pointer;
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    transition: all 0.25s ease;
    letter-spacing: 0.05em;
    text-decoration: none;
  }

  .cta-btn:hover {
    transform: translateY(-2px) scale(1.03);
    box-shadow: 0 10px 28px rgba(0,0,0,0.2);
  }

  .cta-sub {
    font-size: 11px;
    opacity: 0.75;
    margin-top: 10px;
  }

  /* PROGRESS BAR */
  .progress-wrap {
    background: white;
    border-radius: 16px;
    padding: 16px 20px;
    margin-bottom: 24px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.05);
    animation: fadeUp 0.6s ease 0.25s both;
  }

  .progress-label {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: var(--text-light);
    margin-bottom: 8px;
  }

  .progress-bar-outer {
    background: #F0EAE4;
    border-radius: 10px;
    height: 10px;
    overflow: hidden;
  }

  .progress-bar-inner {
    height: 100%;
    background: linear-gradient(90deg, var(--coral), var(--gold));
    border-radius: 10px;
    transition: width 0.5s cubic-bezier(0.34,1.2,0.64,1);
    min-width: 4px;
  }

  /* CONFETTI */
  .confetti-piece {
    position: fixed;
    width: 10px;
    height: 10px;
    border-radius: 2px;
    top: -20px;
    animation: confettiFall 2s ease-in forwards;
    pointer-events: none;
    z-index: 999;
  }

  /* ANIMATIONS */
  @keyframes fadeDown {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(24px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes piggyBounce {
    0% { transform: scale(1); }
    40% { transform: scale(1.3) rotate(-10deg); }
    70% { transform: scale(0.95) rotate(5deg); }
    100% { transform: scale(1) rotate(0); }
  }
  @keyframes checkPop {
    from { transform: scale(0) rotate(-20deg); opacity: 0; }
    to { transform: scale(1) rotate(0); opacity: 1; }
  }
  @keyframes confettiFall {
    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
  }
  @keyframes numberBump {
    0% { transform: scale(1); }
    50% { transform: scale(1.08); }
    100% { transform: scale(1); }
  }
  .number-bump {
    animation: numberBump 0.35s ease;
  }
</style>
</head>
<body>

<div class="container">

  <!-- HEADER -->
  <div class="header">
    <div class="header-badge">âœ¨ ç„¡æ–™è¨ºæ–­ãƒ„ãƒ¼ãƒ«</div>
    <h1>ã‚ãªãŸã®<span>ã¸ããã‚ŠåŠ›</span>ã‚’è¨ºæ–­ã—ã‚ˆã†ï¼</h1>
    <p class="header-sub">ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã ã‘ï¼ä»Šã™ãã§ãã‚‹ç¯€ç´„ã‚’ç¢ºèªã—ã¦<br>å®¶æ—ã«å†…ç·’ã®ã€Œè‡ªåˆ†ã ã‘ã®ãŠé‡‘ã€ã‚’ã¤ãã‚ã†ğŸ·</p>
  </div>

  <!-- STICKY TOTAL -->
  <div class="sticky-total">
    <div class="total-card">
      <div class="total-left">
        <div class="piggy-icon" id="piggyIcon">ğŸ·</div>
        <div>
          <div class="total-label">æœˆé–“ã¸ããã‚Šäºˆæƒ³é¡</div>
          <div class="total-amount" id="totalAmount"><span class="yen">ï¿¥</span><span id="amountNum">0</span></div>
        </div>
      </div>
      <div class="total-period">
        <div style="font-size:11px;color:var(--text-light);">è¡¨ç¤ºåˆ‡æ›¿</div>
        <div class="period-toggle">
          <button class="period-btn active" onclick="setPeriod('month',this)">æœˆ</button>
          <button class="period-btn" onclick="setPeriod('year',this)">å¹´</button>
          <button class="period-btn" onclick="setPeriod('3year',this)">3å¹´</button>
        </div>
      </div>
    </div>
  </div>

  <!-- PROGRESS -->
  <div class="progress-wrap">
    <div class="progress-label">
      <span>ãƒã‚§ãƒƒã‚¯æ¸ˆã¿é …ç›®</span>
      <span><span id="checkedCount">0</span> / <span id="totalCount">0</span> é …ç›®</span>
    </div>
    <div class="progress-bar-outer">
      <div class="progress-bar-inner" id="progressBar" style="width:0%"></div>
    </div>
  </div>

  <!-- CATEGORIES -->
  <div id="categories"></div>

  <!-- RESULT -->
  <div class="result-section">
    <div class="result-card">
      <div class="result-title">ğŸ‰ å¹´é–“ã¸ããã‚Šé”æˆäºˆæƒ³é¡</div>
      <div class="result-year"><span class="yen2">ï¿¥</span><span id="yearTotal">0</span></div>
      <div class="result-year-label">ãƒã‚§ãƒƒã‚¯ã—ãŸç¯€ç´„ã‚’1å¹´ç¶šã‘ã‚‹ã¨â€¦</div>
      <div class="result-message" id="resultMessage">
        ã¾ã ãƒã‚§ãƒƒã‚¯ãŒã‚ã‚Šã¾ã›ã‚“ã€‚<br>ä¸Šã®é …ç›®ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã¿ã¦ãã ã•ã„ï¼
      </div>
      <a href="#" class="cta-btn">ğŸ’Œ ç¯€ç´„ã®ç§˜è¨£ã‚’ã‚‚ã£ã¨çŸ¥ã‚ŠãŸã„ï¼</a>
      <div class="cta-sub">è©³ã—ã„ç¯€ç´„ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ï¼†ã¸ããã‚Šç®¡ç†è¡“ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸</div>
    </div>
  </div>

</div>

<script>
const DATA = [
  {
    id: 'food',
    title: 'é£Ÿè²»ãƒ»é£²ã¿ç‰©',
    icon: 'â˜•',
    color: '#FDEEE5',
    iconBg: '#F8C8B0',
    items: [
      { id: 'coffee', emoji: 'â˜•', name: 'ã‚³ãƒ¼ãƒ’ãƒ¼ã¯ãƒã‚¤ãƒã‚°ã«å…¥ã‚Œã¦æŒå‚', tip: 'ã‚³ãƒ³ãƒ“ãƒ‹ãƒ»ã‚¹ã‚¿ãƒã‚’æˆ‘æ…¢ã—ã¦ã²ã¨ã¤ç¯€ç´„', saving: 150, period: 'day', unit: 'å††/æ—¥' },
      { id: 'lunch', emoji: 'ğŸ±', name: 'ãŠå¼å½“ã‚’æ‰‹ä½œã‚Šã§æŒå‚', tip: 'ã‚³ãƒ³ãƒ“ãƒ‹å¼å½“ã‚ˆã‚Šè‡ªå®¶è£½ã®æ–¹ãŒå®‰ãã¦ç¾å‘³ã—ã„', saving: 600, period: 'day', unit: 'å††/æ—¥' },
      { id: 'snack', emoji: 'ğŸ«', name: 'ãŠã‚„ã¤ã¯ã¾ã¨ã‚è²·ã„ã«å¤‰æ›´', tip: 'å€‹åŒ…è£…ã‚ˆã‚Šè¢‹å…¥ã‚Šã‚’è³¼å…¥ã—ã¦æ—¥ã€…å°‘ã—ãšã¤', saving: 200, period: 'day', unit: 'å††/æ—¥' },
      { id: 'drink', emoji: 'ğŸ§´', name: 'é£²ã¿ç‰©ã¯ã¾ã¨ã‚è²·ã„ãƒ»æ°´ç­’æŒå‚', tip: 'ãƒšãƒƒãƒˆãƒœãƒˆãƒ«è³¼å…¥ã‚’ã‚„ã‚ã‚‹', saving: 100, period: 'day', unit: 'å††/æ—¥' },
      { id: 'dinner', emoji: 'ğŸ¥˜', name: 'å¤–é£Ÿã‚’æœˆ2å›æ¸›ã‚‰ã—ã¦ãŠå®¶ã”ã¯ã‚“ã«', tip: 'å®¶æ—ã§ã®å¤–é£Ÿ1å›å‰Šæ¸›', saving: 3000, period: 'month', unit: 'å††/æœˆ' },
    ]
  },
  {
    id: 'point',
    title: 'ãƒã‚¤ãƒ³ãƒˆãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒãƒƒã‚¯',
    icon: 'ğŸ’³',
    color: '#E8F8F0',
    iconBg: '#B8E8D8',
    items: [
      { id: 'point1', emoji: 'ğŸ“±', name: 'ãƒã‚¤æ´»ã‚¢ãƒ—ãƒªã‚’æ´»ç”¨', tip: 'æ¥½å¤©ãƒ»PayPayãƒ»dãƒã‚¤ãƒ³ãƒˆãªã©ã‚’æ„è­˜çš„ã«ä½¿ã†', saving: 5000, period: 'month', unit: 'å††/æœˆ' },
      { id: 'point2', emoji: 'ğŸ’³', name: 'ã‚¯ãƒ¬ã‚«ã‚’ãƒã‚¤ãƒ³ãƒˆé«˜é‚„å…ƒã‚«ãƒ¼ãƒ‰ã«çµ±ä¸€', tip: '1ã€œ2%é‚„å…ƒã‚«ãƒ¼ãƒ‰ã§æœˆ3ä¸‡ä½¿ãˆã°300ã€œ600å††', saving: 400, period: 'month', unit: 'å††/æœˆ' },
      { id: 'point3', emoji: 'ğŸ›’', name: 'ã‚¹ãƒ¼ãƒ‘ãƒ¼ã®ãƒã‚¤ãƒ³ãƒˆãƒ‡ãƒ¼ã‚’ãƒ•ãƒ«æ´»ç”¨', tip: '5å€ãƒ»10å€ãƒ‡ãƒ¼ã‚’ç‹™ã„è²·ã„', saving: 800, period: 'month', unit: 'å††/æœˆ' },
    ]
  },
  {
    id: 'daily',
    title: 'æ—¥ç”¨å“ãƒ»ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°',
    icon: 'ğŸ§´',
    color: '#FFF5E8',
    iconBg: '#FFD9A0',
    items: [
      { id: 'daily1', emoji: 'ğŸ§»', name: 'æ—¥ç”¨å“ã¯ã¾ã¨ã‚è²·ã„ï¼†ãƒãƒƒãƒˆè³¼å…¥', tip: 'Amazonå®šæœŸä¾¿ãƒ»ãƒ‰ãƒ©ãƒƒã‚°ã‚¹ãƒˆã‚¢ã‚»ãƒ¼ãƒ«ã‚’æ´»ç”¨', saving: 2000, period: 'month', unit: 'å††/æœˆ' },
      { id: 'daily2', emoji: 'ğŸ‘—', name: 'è¡å‹•è²·ã„ã‚’ã€Œ1é€±é–“å¾…ã¤ãƒ«ãƒ¼ãƒ«ã€ã«å¤‰æ›´', tip: 'æœ¬å½“ã«å¿…è¦ã‹å†·é™ã«åˆ¤æ–­ã§ãã‚‹', saving: 3000, period: 'month', unit: 'å††/æœˆ' },
      { id: 'daily3', emoji: 'ğŸ“¦', name: 'ä¸ç”¨å“ã‚’ãƒ•ãƒªãƒã‚¢ãƒ—ãƒªã§å£²å´', tip: 'ãƒ¡ãƒ«ã‚«ãƒªãƒ»ãƒ©ã‚¯ãƒã§æœˆ1å›å‡ºå“', saving: 2500, period: 'month', unit: 'å††/æœˆ' },
    ]
  },
  {
    id: 'fixed',
    title: 'å›ºå®šè²»ã®è¦‹ç›´ã—',
    icon: 'ğŸ“‹',
    color: '#EFF0FE',
    iconBg: '#C8CCF8',
    items: [
      { id: 'fixed1', emoji: 'ğŸ“±', name: 'ã‚¹ãƒãƒ›ã‚’æ ¼å®‰SIMã«ä¹—ã‚Šæ›ãˆ', tip: 'å¤§æ‰‹ã‚­ãƒ£ãƒªã‚¢ã‹ã‚‰ä¹—ã‚Šæ›ãˆã§ç¯€ç´„', saving: 3000, period: 'month', unit: 'å††/æœˆ' },
      { id: 'fixed2', emoji: 'ğŸ“º', name: 'ä½¿ã£ã¦ã„ãªã„ã‚µãƒ–ã‚¹ã‚¯1ã¤è§£ç´„', tip: 'Netflix/Amaz/huluãªã©è¦‹ç›´ã—', saving: 1500, period: 'month', unit: 'å††/æœˆ' },
      { id: 'fixed3', emoji: 'ğŸ’¡', name: 'é›»æ°—ãƒ»ã‚¬ã‚¹ä¼šç¤¾ã‚’ä¹—ã‚Šæ›ãˆ', tip: 'æ¯”è¼ƒã‚µã‚¤ãƒˆã§è¦‹ç›´ã™ã ã‘', saving: 1500, period: 'month', unit: 'å††/æœˆ' },
      { id: 'fixed4', emoji: 'ğŸª', name: 'ç”Ÿå‘½ä¿é™ºã‚’è¦‹ç›´ã—ãƒ»ãƒãƒƒãƒˆä¿é™ºã«å¤‰æ›´', tip: 'ç„¡é§„ãªç‰¹ç´„ã‚’å¤–ã™ã ã‘ã§å¤§ããªç¯€ç´„ã«', saving: 5000, period: 'month', unit: 'å††/æœˆ' },
    ]
  },
  {
    id: 'beauty',
    title: 'ç¾å®¹ãƒ»å¥åº·',
    icon: 'ğŸ’„',
    color: '#FEECF5',
    iconBg: '#F8C0DC',
    items: [
      { id: 'beauty1', emoji: 'ğŸ’‡', name: 'ãƒ˜ã‚¢ã‚«ãƒƒãƒˆã®é »åº¦ã‚’1å›æ¸›ã‚‰ã™', tip: '3ãƒ¶æœˆâ†’4ãƒ¶æœˆã‚µã‚¤ã‚¯ãƒ«ã«å¤‰æ›´', saving: 2000, period: 'month', unit: 'å††/æœˆ' },
      { id: 'beauty2', emoji: 'ğŸ’…', name: 'ã‚»ãƒ«ãƒ•ãƒã‚¤ãƒ«ã«åˆ‡ã‚Šæ›¿ãˆ', tip: 'ã‚»ãƒ«ãƒ•ã‚­ãƒƒãƒˆã§ååˆ†ã‚­ãƒ¬ã‚¤ã«ã§ãã‚‹', saving: 3000, period: 'month', unit: 'å††/æœˆ' },
      { id: 'beauty3', emoji: 'ğŸƒ', name: 'ã‚¸ãƒ ã‚’ã‚¢ãƒ—ãƒªï¼‹ç„¡æ–™æ–½è¨­ã«å¤‰æ›´', tip: 'å…¬åœ’ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ãƒ»YouTubeãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ã§ä»£æ›¿', saving: 8000, period: 'month', unit: 'å††/æœˆ' },
    ]
  },
  {
    id: 'banking',
    title: 'è³¢ã„è²¯è“„ã®ä»•çµ„ã¿',
    icon: 'ğŸ¦',
    color: '#E8F4FD',
    iconBg: '#A8D8F0',
    items: [
      { id: 'bank1', emoji: 'ğŸ¦', name: 'å…ˆå–ã‚Šè²¯è“„ã®å£åº§ã‚’ä½œã‚‹', tip: 'çµ¦æ–™æ—¥ã«è‡ªå‹•ã§åˆ¥å£åº§ã«ç§»ã™ä»•çµ„ã¿ã‚’ä½œã‚‹', saving: 0, period: 'month', unit: 'åŠ¹æœå¤§' },
      { id: 'bank2', emoji: 'ğŸ“Š', name: 'å®¶è¨ˆç°¿ã‚¢ãƒ—ãƒªã§æ”¯å‡ºã‚’å¯è¦–åŒ–', tip: 'ãƒãƒãƒ¼ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ç­‰ã§ç„¡æ„è­˜å‡ºè²»ã‚’ç™ºè¦‹', saving: 3000, period: 'month', unit: 'å††/æœˆ' },
      { id: 'bank3', emoji: 'ğŸ’°', name: 'ã¤ã¿ãŸã¦NISAã§è³‡ç”£å½¢æˆ', tip: 'ç¯€ç¨ã—ãªãŒã‚‰å°†æ¥ã®ãŠé‡‘ã‚‚å¢—ã‚„ã›ã‚‹', saving: 0, period: 'month', unit: 'ç¯€ç¨åŠ¹æœ' },
    ]
  }
];

// Compute per-month savings for each item
function getMonthly(item) {
  if (item.period === 'day') return item.saving * 20; // æœˆ20æ—¥ç¨¼åƒæƒ³å®š
  if (item.period === 'month') return item.saving;
  if (item.period === 'year') return Math.round(item.saving / 12);
  return 0;
}

const TOTAL_ITEMS = DATA.reduce((s, c) => s + c.items.length, 0);
const MAX_MONTHLY = DATA.reduce((s, c) => s + c.items.reduce((ss, i) => ss + getMonthly(i), 0), 0);

let checked = new Set();
let currentPeriod = 'month';

function renderCategories() {
  const container = document.getElementById('categories');
  container.innerHTML = '';
  DATA.forEach(cat => {
    const div = document.createElement('div');
    div.className = 'category';
    div.innerHTML = `
      <div class="category-header">
        <div class="category-icon" style="background:${cat.iconBg};">${cat.icon}</div>
        <div class="category-title">${cat.title}</div>
        <div class="category-subtotal" id="sub-${cat.id}">ï¼‹Â¥0</div>
      </div>
      <div class="items-list">
        ${cat.items.map(item => `
          <div class="check-item" id="item-${item.id}" onclick="toggle('${item.id}')">
            <div class="check-box">
              <span class="check-mark">âœ“</span>
            </div>
            <div class="item-emoji">${item.emoji}</div>
            <div class="item-info">
              <div class="item-name">${item.name}</div>
              <div class="item-tip">${item.tip}</div>
            </div>
            <div class="item-saving">
              <div class="saving-amount">${item.saving > 0 ? 'Â¥'+item.saving.toLocaleString() : 'ğŸ’¡'}</div>
              <div class="saving-unit">${item.unit}</div>
            </div>
          </div>
        `).join('')}
      </div>
    `;
    container.appendChild(div);
  });

  document.getElementById('totalCount').textContent = TOTAL_ITEMS;
}

function toggle(itemId) {
  if (checked.has(itemId)) {
    checked.delete(itemId);
    document.getElementById('item-' + itemId).classList.remove('checked');
  } else {
    checked.add(itemId);
    document.getElementById('item-' + itemId).classList.add('checked');
    // Pop
    const el = document.getElementById('item-' + itemId);
    el.style.animation = 'none';
    setTimeout(() => el.style.animation = '', 10);
  }
  update();
}

function setPeriod(period, btn) {
  currentPeriod = period;
  document.querySelectorAll('.period-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  update(false);
}

function update(animate = true) {
  // Compute totals
  const monthlyTotal = Array.from(checked).reduce((s, id) => {
    for (const cat of DATA) {
      const item = cat.items.find(i => i.id === id);
      if (item) return s + getMonthly(item);
    }
    return s;
  }, 0);

  let displayAmount = monthlyTotal;
  let label = 'æœˆé–“';
  if (currentPeriod === 'year') { displayAmount = monthlyTotal * 12; label = 'å¹´é–“'; }
  if (currentPeriod === '3year') { displayAmount = monthlyTotal * 36; label = '3å¹´é–“'; }

  const amountEl = document.getElementById('amountNum');
  const oldVal = parseInt(amountEl.textContent.replace(/,/g, '') || 0);
  if (oldVal !== displayAmount) {
    animateNumber(amountEl, oldVal, displayAmount, 400);
    document.getElementById('amountNum').parentElement.classList.remove('number-bump');
    void document.getElementById('amountNum').parentElement.offsetWidth;
    document.getElementById('amountNum').parentElement.classList.add('number-bump');
  }

  // Piggy bounce
  if (animate && checked.size > 0) {
    const pig = document.getElementById('piggyIcon');
    pig.classList.remove('bounce');
    void pig.offsetWidth;
    pig.classList.add('bounce');
    setTimeout(() => pig.classList.remove('bounce'), 500);
  }

  // Year total
  const yearTotal = monthlyTotal * 12;
  animateNumber(document.getElementById('yearTotal'), 0, yearTotal, 500);

  // Category subtotals
  DATA.forEach(cat => {
    const sub = cat.items.filter(i => checked.has(i.id)).reduce((s, i) => s + getMonthly(i), 0);
    const el = document.getElementById('sub-' + cat.id);
    if (el) el.textContent = sub > 0 ? `ï¼‹Â¥${sub.toLocaleString()}` : 'Â¥0';
  });

  // Progress
  document.getElementById('checkedCount').textContent = checked.size;
  const pct = TOTAL_ITEMS > 0 ? (checked.size / TOTAL_ITEMS * 100) : 0;
  document.getElementById('progressBar').style.width = pct + '%';

  // Result message
  updateMessage(monthlyTotal, yearTotal);

  // Confetti if milestone
  if (animate && [5, 10, 15, TOTAL_ITEMS].includes(checked.size)) {
    launchConfetti();
  }
}

function animateNumber(el, from, to, duration) {
  const start = performance.now();
  function step(now) {
    const p = Math.min((now - start) / duration, 1);
    const ease = 1 - Math.pow(1 - p, 3);
    const val = Math.round(from + (to - from) * ease);
    el.textContent = val.toLocaleString();
    if (p < 1) requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}

function updateMessage(monthly, yearly) {
  const el = document.getElementById('resultMessage');
  if (monthly === 0) {
    el.textContent = 'ã¾ã ãƒã‚§ãƒƒã‚¯ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ä¸Šã®é …ç›®ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã¿ã¦ãã ã•ã„ï¼';
    return;
  }
  let msg = '';
  if (yearly >= 300000) msg = `ğŸŠ ã™ã”ã„ï¼å¹´é–“${yearly.toLocaleString()}å††ã®ã¸ããã‚ŠãŒã§ãã¾ã™ï¼\næ—…è¡Œãƒ»è‡ªåˆ†ç£¨ããƒ»ãƒ—ãƒè´…æ²¢ã«ä½¿ãˆã‚‹ãŠé‡‘ãŒç”Ÿã¾ã‚Œã¾ã™ğŸ’•`;
  else if (yearly >= 100000) msg = `âœ¨ å¹´é–“${yearly.toLocaleString()}å††ã®ã¸ããã‚ŠãŒå¯èƒ½ï¼\næœˆ${monthly.toLocaleString()}å††ã€ã‚³ãƒ„ã‚³ãƒ„ç©ã¿ç«‹ã¦ã‚Œã°10ä¸‡å††è¶…ãˆã‚‚å¤¢ã˜ã‚ƒãªã„ğŸŒ¸`;
  else if (yearly >= 50000) msg = `ğŸŒŸ å¹´é–“${yearly.toLocaleString()}å††ã®ã¸ããã‚ŠãŒã§ããã†ï¼\nå°ã•ãªç¯€ç´„ã®ç©ã¿é‡ã­ãŒå¤§ããªãŠé‡‘ã«å¤‰ã‚ã‚Šã¾ã™ğŸ’ª`;
  else msg = `ğŸ’¡ æœˆ${monthly.toLocaleString()}å††ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆï¼\nã¾ã ã¾ã ãƒã‚§ãƒƒã‚¯ã§ãã‚‹é …ç›®ãŒã‚ã‚Šã¾ã™ã€‚å…¨éƒ¨è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ğŸ·`;

  el.textContent = msg;
}

function launchConfetti() {
  const colors = ['#E8835A', '#D4A043', '#4AA88A', '#F8C8B0', '#C45E38'];
  for (let i = 0; i < 24; i++) {
    setTimeout(() => {
      const el = document.createElement('div');
      el.className = 'confetti-piece';
      el.style.left = Math.random() * 100 + 'vw';
      el.style.background = colors[Math.floor(Math.random() * colors.length)];
      el.style.animationDuration = (1.5 + Math.random()) + 's';
      el.style.animationDelay = (Math.random() * 0.5) + 's';
      el.style.width = (8 + Math.random() * 8) + 'px';
      el.style.height = (8 + Math.random() * 8) + 'px';
      document.body.appendChild(el);
      setTimeout(() => el.remove(), 3000);
    }, i * 30);
  }
}

renderCategories();
update(false);
</script>
</body>
</html>
